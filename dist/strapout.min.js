!function(a,b){if("function"==typeof define&&define.amd)define("strapout",["jquery","knockout"],b);else{if("undefined"==typeof a.ko)throw new Error("knockoutjs is required for strapout.");if("undefined"==typeof a.jQuery)throw new Error("jQuery is required for strapout.");a.strapout=b(a.$,a.ko)}}(this,function(a,b){function c(a,c,d){return"undefined"!=typeof c[a]?b.isObservable(c[a])?void(d[a]=c[a]):void d[a](c[a]):void 0}function d(a){return b.isObservable(a)?a:b.observable(a)}function e(a,b){return function(c,d,e){var f,g=d();return f=g instanceof a?g:new a,b=b||"init",f[b](c,d,e)}}function f(b,c){return a(b).closest('[data-marker="'+c+'"]')[0]}var g={};g.Modal=function(){function d(a){a=a||{},this.isOpen=b.observable(!1),this.options=f,this.element=null,this._needsToAppend=!1}var f={show:!1};return d.prototype.open=function(){this._needsToAppend&&(a(this.element).appendTo(this.options.appendTo),this._needsToAppend=!1),a(this.element).modal("show")},d.prototype.close=function(){a(this.element).modal("hide")},d.prototype.extend=function(){return 1===arguments.length?(b.utils.objectForEach(arguments[0],this.extendOne.bind(this)),this):2===arguments.length?(this.extendOne(arguments[0],arguments[1]),this):!1},d.prototype.extendOne=function(a,b){return"undefined"!=typeof this[a]?!1:void(this[a]=b)},d.prototype.init=function(e,f,g,h,i){var j,k,l,m,n=this;return j=f(),this.element=e,j instanceof d?g.has("modalOptions")&&(this.options=a.extend(this.options,g.get("modalOptions"))):(c("isOpen",j,this),j.options&&(this.options=a.extend(this.options,j.options))),this.isOpen(this.options.show),this.options.appendTo&&(this._needsToAppend=!0),a(e).modal(this.options),this.isOpen&&b.isSubscribable(this.isOpen)&&this.isOpen.subscribe(function(b){b?n.open():(n.close(),a(e).modal("hide"))}),m=function(a){27===a.which&&n.close()},k=function(){n.isOpen(!0),a(window).on("keydown",m)},l=function(){n.isOpen(!1),a(window).off("keydown",m)},b.isWriteableObservable(this.isOpen)&&(a(e).on("show.bs.modal",k),a(e).on("hidden.bs.modal",l),b.utils.domNodeDisposal.addDisposeCallback(e,function(){a(e).off("show.bs.modal",k),a(e).off("hidden.bs.modal",l)})),{controlsDescendantBindings:!1}},b.bindingHandlers.modal={init:e(d)},d}(),g.Dropdown=function(){function c(b){b=b||{},this.isOpen=d(b.isOpen||!1),this.element=null,this.options=a.extend({},b.options),this._forceClose=!1,this._isOpening=!1}return c.prototype.init=function(d,e,f){var g,h,i,j,k,l,m,n,o,p,q=this;g=e(),g instanceof c||!b.isObservable(g)||(this.isOpen=g),f.has("dropdownOptions")&&(this.options=a.extend(this.options,f.get("dropdownOptions"))),this.element=d,h=a(d),h.attr("data-toggle")||h.attr("data-toggle","dropdown"),h.dropdown(),i=h.parent(),j=a(h.attr("data-target")?h.attr("data-target"):i.children().get(1)),k=function(a){return q.isOpen()?!1:void(q.options.sticky&&(q._isOpening=!0))},l=function(b){q.isOpen(!0),q.options.sticky&&a(d).siblings(".dropdown-backdrop").remove()},m=function(a){return!q.isOpen()||q.options.sticky&&!q._forceClose?!1:void(q.options.sticky&&q._forceClose&&(q._forceClose=!1))},n=function(a){q.isOpen(!1)},o=function(a){!q._isOpening&&q.isOpen()&&q.close(!0),q._isOpening&&(q._isOpening=!1)},p=function(b){var c=a(b.originalEvent.target),d=!1;q.options.include&&a.each(q.options.include,function(a,b){!d&&c.closest(b).length&&(d=!0)}),q._isOpening||0!=c.closest(j).length||!d&&q.close(!0),q._isOpening&&(q._isOpening=!1)},b.isWriteableObservable(this.isOpen)&&(i.on("show.bs.dropdown",k),i.on("shown.bs.dropdown",l),i.on("hide.bs.dropdown",m),i.on("hidden.bs.dropdown",n),this.options.sticky&&(a(d).on("click.bs.dropdown",o),a(window).on("click.bs.dropdown.data-api",p))),b.utils.domNodeDisposal.addDisposeCallback(d,function(){i.off("show.bs.dropdown",k),i.off("shown.bs.dropdown",l),i.off("hide.bs.dropdown",m),i.off("hidden.bs.dropdown",n),q.options.sticky&&(a(d).off("click.bs.dropdown",o),a(window).off("click.bs.dropdown.data-api",p))}),b.isSubscribable(this.isOpen)&&this.isOpen.subscribe(function(a){q[a?"open":"close"]()})},c.prototype.open=function(){this.isOpen()||a(this.element).dropdown("toggle")},c.prototype.close=function(b){this.isOpen()&&(b&&this.options.sticky&&(this._forceClose=!0),a(this.element).dropdown("toggle"))},c.prototype.toggle=function(b){this.isOpen()&&b&&this.options.sticky&&(this._forceClose=!0),a(this.element).dropdown("toggle")},b.bindingHandlers.dropdown={init:e(c)},c}(),g.Popover=function(){function f(a){a=a||{},this.title=d(a.title),this.content=d(a.content),this.isOpen=d(a.isOpen||!1),this.template=d(a.template),this.options=a.options||{},this.element=null}return f.prototype.init=function(d,e,g){var h,i,j,k,l,m=this;h=e(),h instanceof f?g.has("popoverOptions")&&a.extend(this.options,g.get("popoverOptions")):(c("title",h,this),c("content",h,this),c("isOpen",h,this),c("template",h,this),h.options&&a.extend(this.options,h.options)),this.options.title?this.title(this.options.title):"undefined"!=typeof this.title()&&(this.options.title=this.title()),this.options.content?this.content(this.options.content):"undefined"!=typeof this.content()&&(this.options.content=this.content()),this.options.template?this.template(this.options.template):"undefined"!=typeof this.template()&&(this.options.template=this.template()),this.element=d,a(d).popover(this.options),i=function(){return m.isOpen()?!1:void 0},j=function(){m.isOpen(!0)},k=function(){return m.isOpen()?void 0:!1},l=function(){m.isOpen(!1)},b.isWriteableObservable(this.isOpen)&&(a(d).on("show.bs.popover",i),a(d).on("shown.bs.popover",j),a(d).on("hide.bs.popover",k),a(d).on("hidden.bs.popover",l),b.utils.domNodeDisposal.addDisposeCallback(d,function(){a(d).off("show.bs.popover",i),a(d).off("shown.bs.popover",j),a(d).off("hide.bs.popover",k),a(d).off("hidden.bs.popover",l)})),b.isSubscribable(this.isOpen)&&this.isOpen.subscribe(function(a){m[a?"open":"close"]()}),b.isSubscribable(this.title)&&this.title.subscribe(function(b){a(d).data("bs.popover").options.title=b}),b.isSubscribable(this.content)&&this.content.subscribe(function(b){a(d).data("bs.popover").options.content=b}),b.isSubscribable(this.template)&&this.template.subscribe(function(b){var c=a(d).data("bs.popover");c?c.$tip&&(c.tip().hasClass("in")&&m.close(),c.$tip=a(b)):c.options.template=b})},f.prototype.open=function(){this.isOpen()||a(this.element).popover("show")},f.prototype.close=function(){this.isOpen()&&a(this.element).popover("hide")},f.prototype.toggle=function(){a(this.element).popover("toggle")},f.prototype.dispose=function(){a(this.element).popover("destroy")},b.bindingHandlers.popover={init:e(f)},f}(),g.CheckButton=function(){function d(){this.element=null,this.selected=b.observableArray()}return d.prototype.init=function(e,f){var g,h,i=this;return g=f(),g instanceof d||c("selected",g,this),this.element=e,h=a(e),h.attr("data-toggle")||h.attr("data-toggle","buttons"),h.find('input[type="checkbox"]').each(function(){var c=this;b.applyBindingsToNode(c,{event:{change:function(){var b=a(c).filter(":checkbox").prop("checked");b?i.selected.push(a(c).val()):i.selected.remove(a(c).val())}}})}),h.button(),{controlsDescendantBindings:!1}},b.bindingHandlers.checkButton={init:e(d)},d}(),g.RadioButton=function(){function d(){this.element=null,this.selected=b.observable()}return d.prototype.init=function(e,f){var g,h,i=this;return g=f(),g instanceof d||c("selected",g,this),this.element=e,h=a(e),h.attr("data-toggle")||h.attr("data-toggle","buttons"),h.find('input[type="radio"]').each(function(){var c=this;b.applyBindingsToNode(c,{event:{change:function(){var b=a(c).filter(":radio").prop("checked");b&&i.selected(a(c).val())}}})}),h.button(),{controlsDescendantBindings:!1}},b.bindingHandlers.radioButton={init:e(d)},d}(),g.StateButton=function(){function d(){this.state=b.observable("default"),this.states={"default":{text:null,action:null,next:null}},this.element=null}return d.prototype.addState=function(b,c){return"String"==typeof c?this.states[b]={text:c,action:null,next:null}:this.states[b]=a.extend({text:null,action:null,next:null},c),this},d.prototype.set=function(a){var b,c,d=this;c=this.states[this.state()],c&&"function"==typeof c.action&&(b=c.action.apply(this)),b&&"function"==typeof b.then?b.then(function(b){b!==!1&&d.state(a)}):b!==!1&&this.state(a)},d.prototype.reset=function(){this.state("default")},d.prototype.action=function(a,b){return this.states[a].action=b,this},d.prototype.next=function(){if(2===arguments.length){var a=arguments[0],b=arguments[1];return this.states[a].next=b,this}var c=this.states[this.state()];c&&null!==c.next&&this.set(c.next)},d.prototype.init=function(e,f,g){var h,i,j=this;return h=f(),h instanceof d||c("state",h,this),this.element=e,i=a(e),b.utils.objectForEach(this.states,function(a,b){"default"!==a&&(i.attr("data-"+a+"-text")||i.attr("data-"+a+"-text",b.text))}),i.button(),this.state.subscribe(function(b){return"undefined"==typeof b||"default"===b?void a(e).button("reset"):void a(e).button(b)}),g.has("click")||b.applyBindingsToNode(e,{click:function(){return j.next()}}),{controlsDescendantBindings:!1}},b.bindingHandlers.stateButton={init:e(d)},d}(),g.ToggleButton=function(){function d(){this.active=b.observable(!1),this.element=null}return d.prototype.toggle=function(){return this.active(!this.active()),a(this.element).button("active"),!1},d.prototype.init=function(e,f){var g,h,i=this;return g=f(),g instanceof d||c("active",g,this),this.element=e,h=a(e),h.button(),h.attr("data-toggle")||h.attr("data-toggle","button"),b.applyBindingsToNode(e,{click:function(){return i.toggle()}}),{controlsDescendantBindings:!1}},b.bindingHandlers.toggleButton={init:e(d)},d}();var h=function(){function d(a){return b.isObservable(a)?a:b.observable(a)}function g(){this.element=null,this.tabs=[],this.content={},this.currentTab=b.observable()}function h(b){a.extend(this,b),this.container=null,this.index=null,this.active=d(this.active),this.element=null,this.title=d(this.title),!this.target&&this.title()&&(this.target="#"+this.title())}var i="tabContainer";return g.prototype.init=function(b,c,d){var e;this.element=b,e=a(b),e.attr("data-marker")||e.attr("data-marker",i)},g.prototype.add=function(b){var c=this,d=this.tabs.length;return this.tabs.push(b),!d&&this.element&&a(this.element).parent().addClass("active"),b.index=d,b.container=this,b.active.subscribe(function(a){a&&c.currentTab(b)}),b.active()&&c.currentTab(b),this},g.prototype.link=function(a,b){this.content[b]=a},g.prototype.addTab=function(a,b,c){return c=c||!1,this.add(new h({title:a,target:b,active:c})),this},b.bindingHandlers.tabList={init:e(g)},h.prototype.init=function(d,e,f){var g,i=this,j=e();this.element=d,j instanceof h||(g=this.closestTabList(d),g.add(this),c("title",j,this)),f.has("text")||b.applyBindingsToNode(d,{text:this.title}),a(d).on("show.bs.tab",function(a){var b;return"function"==typeof i.onShow&&(b=i.onShow.call(i)),b}),a(d).on("shown.bs.tab",function(a){var c;a.relatedTarget&&(c=b.contextFor(a.relatedTarget)),i.active(!0),c&&c.$data.active(!1),"function"==typeof i.onShown&&i.onShown.call(i)}),a(d).attr("data-toggle")||a(d).attr("data-toggle","tab"),a(d).attr("data-target")||a(d).attr("href")||a(d).attr("data-target",this.target),this.active()&&(a(d).closest("li").not("active")&&a(d).closest("li").addClass("active"),a(this.target).not("active")&&a(this.target).addClass("active"))},h.prototype.show=function(){a(this.element).tab("show")},h.prototype.closestTabList=function(a){var c,d,e=f(a,i),g=b.bindingProvider.instance;return c=b.contextFor(e),d=g.getBindingAccessors(e,c),d&&d.tabList?d.tabList():void 0},b.bindingHandlers.tab={init:e(h)},b.bindingHandlers.tabContent={init:function(a,b,c){}},{TabList:g,Tab:h}}();return g.TabList=h.TabList,g.Tab=h.Tab,g.Tooltip=function(){function f(a){a=a||{},this.title=d(a.title),this.isOpen=d(a.isOpen||!1),this.options=a.options||{},this.element=null}return f.prototype.init=function(d,e,g){var h,i,j,k,l,m=this;h=e(),h instanceof f?g.has("tooltipOptions")&&a.extend(this.options,g.get("tooltipOptions")):(c("title",h,this),c("isOpen",h,this),h.options&&a.extend(this.options,h.options)),this.options.title?this.title(this.options.title):"undefined"!=typeof this.title()&&(this.options.title=this.title()),this.element=d,a(d).tooltip(this.options),i=function(){return m.isOpen()?!1:void 0},j=function(){m.isOpen(!0)},k=function(){return m.isOpen()?void 0:!1},l=function(){m.isOpen(!1)},b.isWriteableObservable(this.isOpen)&&(a(d).on("show.bs.tooltip",i),a(d).on("shown.bs.tooltip",j),a(d).on("hide.bs.tooltip",k),a(d).on("hidden.bs.tooltip",l),b.utils.domNodeDisposal.addDisposeCallback(d,function(){a(d).off("show.bs.tooltip",i),a(d).off("shown.bs.tooltip",j),a(d).off("hide.bs.tooltip",k),a(d).off("hidden.bs.tooltip",onHIdden)})),b.isSubscribable(this.isOpen)&&this.isOpen.subscribe(function(a){m[a?"open":"close"]()}),b.isSubscribable(this.title)&&this.title.subscribe(function(b){a(d).data("bs.tooltip").options.title=b})},f.prototype.open=function(){this.isOpen()||a(this.element).tooltip("show")},f.prototype.close=function(){this.isOpen()&&a(this.element).tooltip("hide")},f.prototype.toggle=function(){a(this.element).tooltip("toggle")},f.prototype.dispose=function(){a(this.element).tooltip("destroy")},b.bindingHandlers.tooltip={init:e(f)},f}(),g.Collapse=function(){function d(c){a.extend(this,{isOpen:b.observable(!1),enabled:b.observable(!0),options:{}},c),this.element=null,this.trigger=null}return a.extend(d.prototype,{initCollapse:function(e,f,g){var h,i,j,k=this;return h=f(),this.element=e,h instanceof d?g.has("collapseOptions")&&a.extend(this.options,g.get("collapseOptions")):(c("isOpen",h,this),h.options&&a.extend(this.options,h.options)),this.isOpen(this.options.show),a(e).collapse(this.options),i=function(){k.isOpen(!0)},j=function(){k.isOpen(!1)},b.isWriteableObservable(this.isOpen)&&(this.options.toggle&&this.isOpen(!0),a(e).on("shown.bs.collapse",i),a(e).on("hidden.bs.collapse",j),b.utils.domNodeDisposal.addDisposeCallback(e,function(){a(e).off("shown.bs.collapse",i),a(e).off("show.bs.collapse",j)})),{controlsDescendantBindings:!1}},open:function(){a(this.element).collapse("show")},close:function(){a(this.element).collapse("hide")}}),b.bindingHandlers.collapse={init:e(d,"initCollapse")},d}(),g});
//# sourceMappingURL=strapout.min.map